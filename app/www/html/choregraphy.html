<ion-view view-title="Choregraphie">

    <!--Nav Buttons left-->
    <ion-nav-buttons side="left">
        <button class="button button-small button-icon icon ion-ios-home" onclick="window.location.href='#/home'"></button>
        <button class="button button-small button-icon" onclick="window.location.href='#/avatar'">
            <img border="0" alt="Avatar" src="img/pixel-sitting.png" width="35" height="35">
        </button>
    </ion-nav-buttons>

    <!--Nav Buttons right-->
    <ion-nav-buttons side="right">
        <button class="button button-small button-icon icon ion-help" ng-click="showAlert()"></button>
        <button class="button button-small button-icon icon ion-ios-gear" onclick="window.location.href='#/account'"></button>
    </ion-nav-buttons>


    <ion-content class="padding">

        <h2>Welcome to choregraphy PAGE</h2>
        <p>
            <h3>Choisi ta musique</h3>
            <button class=" button button-positive" ng-disabled="magicDisabled" ng-click="setMagic()">Magic system - Tu est fou !</button>
            <button class="button button-positive" ng-disabled="feelingsDisabled" ng-click="setFeelings()">Steam Phunk - Feelings</button>
            <button class="button button-positive" ng-disabled="pitchDisabled" ng-click="setPitch()">Bad pitched - Insanelike</button>

        </p>

        <p>
            <h3>Choisi tes mouvements et fait danser poppy !</h3>
            <div class="row">
                <div class="col">
                    <img border="0" alt="Choregraphy" src="img/dancer_violet.png" width="80" height="80">
                </div>
                <div class="col">
                    <img border="0" alt="Choregraphy" src="img/dancer_violet.png" width="80" height="80">
                </div>
                <div class="col">
                    <img border="0" alt="Choregraphy" src="img/dancer_violet.png" width="80" height="80">
                </div>
                <div class="col">
                    <img border="0" alt="Choregraphy" src="img/dancer_violet.png" width="80" height="80">
                </div>

                <div ng-drag="true" ng-drag-data="{obj}" ng-drag-success="onDragComplete($data,$event)" ng-center-anchor="true">
                    Draggable div
                </div>

                <div ng-drop="true" ng-drop-success="onDropComplete($data,$event)" >
                    Drop area
                </div>



                <div class="col">
                    <button class="button center" ng-disabled="isDisabled" ng-click="playAudio();disableButton()">
                        <img border="0" alt="PlayButton" src="img/play_red.png" width="40" height="40">
                    </button>
                </div>

            </div>

        </p>



        <div class="container" ng-controller="MainCtrl">

            <div class="row">
                <h1>ngDraggable Example</h1>
            </div>

            <ul class="draggable-objects">
                <li ng-if="true">
                    <div ng-drag="true" ng-drag-data="{name:'test'}" data-allow-transform="true">TEST</div>
                </li>
            </ul>

            <hr/>
            <div ng-drop="true" ng-drop-success="onDropComplete1($data,$event)">
                <span class="title">Drop area #1</span>

                <div ng-repeat="obj in droppedObjects1" ng-drag="true" ng-drag-data="obj"
                ng-drag-success="onDragSuccess1($data,$event)" ng-center-anchor="{{centerAnchor}}">
                {{obj.name}}
            </div>

        </div>

        <div ng-drop="true" ng-drop-success="onDropComplete2($data,$event)">
            <span class="title">Drop area #2</span>

            <div ng-repeat="obj in droppedObjects2" ng-drag="true" ng-drag-data="obj"
            ng-drag-success="onDragSuccess2($data,$event)" ng-center-anchor="{{centerAnchor}}">
            {{obj.name}}
        </div>

    </div>

    <hr>


</div>

<script>
angular.module('ExampleApp', ['ngDraggable']).
controller('MainCtrl', function ($scope) {
    $scope.centerAnchor = true;
    $scope.toggleCenterAnchor = function () {
        $scope.centerAnchor = !$scope.centerAnchor
    }
    //$scope.draggableObjects = [{name:'one'}, {name:'two'}, {name:'three'}];
    var onDraggableEvent = function (evt, data) {
        console.log("128", "onDraggableEvent", evt, data);
    }
    $scope.$on('draggable:start', onDraggableEvent);
    // $scope.$on('draggable:move', onDraggableEvent);
    $scope.$on('draggable:end', onDraggableEvent);
    $scope.droppedObjects1 = [];
    $scope.droppedObjects2 = [];
    $scope.onDropComplete1 = function (data, evt) {
        console.log("127", "$scope", "onDropComplete1", data, evt);
        var index = $scope.droppedObjects1.indexOf(data);
        if (index == -1)
        $scope.droppedObjects1.push(data);
    }
    $scope.onDragSuccess1 = function (data, evt) {
        console.log("133", "$scope", "onDragSuccess1", "", evt);
        var index = $scope.droppedObjects1.indexOf(data);
        if (index > -1) {
            $scope.droppedObjects1.splice(index, 1);
        }
    }
    $scope.onDragSuccess2 = function (data, evt) {
        var index = $scope.droppedObjects2.indexOf(data);
        if (index > -1) {
            $scope.droppedObjects2.splice(index, 1);
        }
    }
    $scope.onDropComplete2 = function (data, evt) {
        var index = $scope.droppedObjects2.indexOf(data);
        if (index == -1) {
            $scope.droppedObjects2.push(data);
        }
    }
    var inArray = function (array, obj) {
        var index = array.indexOf(obj);
    }
});
</script>


</ion-content>
</ion-view>
